<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="–ê—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ –ú–æ—Å–∫–≤–µ. –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ, —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π.">
<meta name="keywords" content="–∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –¥—Ä–µ–ª—å, –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä, –ú–æ—Å–∫–≤–∞">
<style>
:root {
  --main-yellow: #FFC107;
  --main-black: #1F1F1F;
  --light-gray: #F3F3F3;
  --white: #FFFFFF;
  --card-shadow: rgba(0,0,0,0.15);
}

/* –§–æ–Ω */
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #f0f0f0 25%, #e0e0e0 25%, #e0e0e0 50%, #f0f0f0 50%, #f0f0f0 75%, #e0e0e0 75%, #e0e0e0 100%);
  background-size: 50px 50px;
  color: var(--main-black);
}

/* –°—Å—ã–ª–∫–∏ */
a{text-decoration:none; color: inherit;}

/* Header */
header {
  background: var(--main-black);
  color: var(--white);
  padding:15px 10px;
  display:flex;
  justify-content: space-between;
  align-items:center;
  flex-wrap:wrap;
}
header .logo h1 {margin:0;}
header .logo img {height:50px; border-radius:8px; margin-right:10px;}
header .phone {font-size:18px; font-weight:bold; color:var(--main-yellow);}

/* Controls */
.controls {
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:center;
  padding:12px;
  background: var(--white);
  box-shadow:0 2px 4px rgba(0,0,0,0.1);
  position:sticky; top:0;
  z-index:200;
}
input, select {padding:8px; border-radius:6px; border:1px solid #ccc; font-size:14px;}
input:focus, select:focus{border-color:var(--main-yellow); outline:none;}
label {font-size:14px; display:flex; align-items:center; gap:4px;}

/* –ü–ª–∏—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
#categories {display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin:20px;}
.category-tile {
  background: var(--white);
  padding:20px 25px;
  border-radius:12px;
  box-shadow:0 2px 5px var(--card-shadow);
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}
.category-tile:hover{transform:scale(1.05); box-shadow:0 8px 15px var(--card-shadow);}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ */
.container {display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:20px; padding:20px;}
.card {background: var(--white); border-radius:12px; box-shadow:0 2px 5px var(--card-shadow); padding:10px; display:flex; flex-direction:column; transition:transform 0.3s, box-shadow 0.3s; cursor:pointer; overflow:hidden; opacity:0; animation:fadeIn 0.5s forwards;}
.card:hover{transform:translateY(-5px); box-shadow:0 8px 15px var(--card-shadow);}
.card img{width:100%; height:180px; object-fit:cover; border-radius:10px; transition:0.3s;}
.card img:hover{transform:scale(1.05);}
.badge {padding:4px 8px; border-radius:6px; color:var(--main-black); font-size:12px; width:fit-content; margin-bottom:5px; font-weight:bold;}
.yes {background: var(--main-yellow);}
.no {background:#dc2626;}
.price {font-weight:bold; margin-top:5px;}
.card button {margin-top:6px; color:var(--main-black); padding:8px; border:none; border-radius:8px; font-size:14px; cursor:pointer; transition:0.3s;}
.card button:hover{transform:scale(1.05); box-shadow:0 4px 10px rgba(0,0,0,0.25);}
.cartBtn{background:var(--main-yellow); color:var(--main-black); font-weight:bold;}
.card a button{background:var(--main-yellow); font-weight:bold;}

/* Card Details */
.card-details {max-height:0; overflow:hidden; transition:max-height 0.5s ease, padding 0.5s ease;}
.card.open .card-details{max-height:200px; padding-top:10px;}

/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ */
#orderBox {position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:999;}
#order {background:var(--white); padding:20px; border-radius:12px; width:90%; max-width:400px; box-shadow:0 4px 15px rgba(0,0,0,0.25);}
#order h3{margin-top:0;}
#order input{width:100%; padding:8px; margin-bottom:10px; border-radius:6px; border:1px solid #ccc;}
#order button{width:100%; background:var(--main-yellow); font-weight:bold; border:none; padding:10px; border-radius:8px; cursor:pointer; transition:0.3s;}
#order button:hover{transform:scale(1.05);}

/* –ê–Ω–∏–º–∞—Ü–∏—è */
@keyframes fadeIn{from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);}}

/* –ê–¥–∞–ø—Ç–∏–≤ */
@media(max-width:600px){.card img{height:150px;} .controls{flex-direction:column; gap:6px;} .category-tile{flex:1 1 100%; text-align:center;}}
</style>
</head>
<body>

<header>
  <div class="logo" style="display:flex;align-items:center;">
    <img src="logo.png" alt="–†–æ–º–ê—Ä–µ–Ω–¥–∞">
    <h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
  </div>
  <div class="phone">üìû +7 915 277 24 41</div>
</header>

<!-- –§–∏–ª—å—Ç—Ä—ã -->
<div class="controls">
  <input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
  <select id="categoryFilter"><option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
  <label><input type="checkbox" id="availableOnly"> –í –Ω–∞–ª–∏—á–∏–∏</label>
  <select id="sortPrice">
    <option value="none">–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
    <option value="asc">–¶–µ–Ω–∞ ‚Üë</option>
    <option value="desc">–¶–µ–Ω–∞ ‚Üì</option>
  </select>
</div>

<!-- –ü–ª–∏—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<div id="categories"></div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ -->
<div class="container" id="products"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ -->
<div id="orderBox">
  <div id="order">
    <h3>–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑</h3>
    <input id="clientName" placeholder="–í–∞—à–µ –∏–º—è">
    <input id="clientPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
    <button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <button onclick="closeOrder()" style="margin-top:8px;background:#ccc;color:#000;">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
// URL –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã CSV
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let products = [];
let cartItem = null;

// --- –ó–∞–≥—Ä—É–∑–∫–∞ CSV ---
fetch(sheetURL)
.then(r => r.text())
.then(csv => {
  const rows = csv.split("\n").slice(1).filter(r => r.trim() !== "");
  products = rows.map(r=>{
    const c = r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
    return {
      cat: c[0].trim(),
      name: c[1].trim(),
      desc: c[2]?c[2].replace(/"/g,'').replace(/\n/g,'|'):'–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
      img: c[3]?c[3].trim():'https://via.placeholder.com/300x180.png?text=–ù–µ—Ç+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
      p1: c[4]?Number(c[4]):0,
      p2: c[5]?Number(c[5]):0,
      p3: c[6]?Number(c[6]):0,
      p5: c[7]?Number(c[7]):0,
      avail: c[8]?c[8].trim().toLowerCase()==='–¥–∞':false
    };
  });

  initCategories();
  initFilters();
  applyFilters();
});

// --- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ---
function initCategories(){
  const cats = [...new Set(products.map(p=>p.cat))];
  const container = document.getElementById("categories");
  cats.forEach(cat=>{
    const div = document.createElement("div");
    div.className = "category-tile";
    div.textContent = cat;
    div.onclick = ()=>{document.getElementById("categoryFilter").value=cat; applyFilters(); window.scrollTo({top:150, behavior:"smooth"});}
    container.appendChild(div);
  });
}

// --- –§–∏–ª—å—Ç—Ä—ã ---
function initFilters(){
  const f = document.getElementById("categoryFilter");
  [...new Set(products.map(p=>p.cat))].forEach(cat=>{
    const o = document.createElement("option");
    o.value = cat;
    o.textContent = cat;
    f.appendChild(o);
  });
}
document.getElementById("search").addEventListener("input", applyFilters);
document.getElementById("categoryFilter").addEventListener("change", applyFilters);
document.getElementById("sortPrice").addEventListener("change", applyFilters);
document.getElementById("availableOnly").addEventListener("change", applyFilters);

function applyFilters(){
  let filtered = [...products];
  const search = document.getElementById("search").value.toLowerCase();
  const cat = document.getElementById("categoryFilter").value;
  const sort = document.getElementById("sortPrice").value;
  const available = document.getElementById("availableOnly").checked;

  if(cat!=="all") filtered = filtered.filter(p=>p.cat===cat);
  if(search) filtered = filtered.filter(p=>p.name.toLowerCase().includes(search));
  if(available) filtered = filtered.filter(p=>p.avail);

  if(sort==='asc') filtered.sort((a,b)=>a.p1-b.p1);
  if(sort==='desc') filtered.sort((a,b)=>b.p1-a.p1);

  render(filtered);
}

// --- –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ ---
function render(list){
  const cont = document.getElementById("products");
  cont.innerHTML="";
  list.forEach(i=>{
    const badgeClass = i.avail?'yes':'no';
    const badgeText = i.avail?'–í –Ω–∞–ª–∏—á–∏–∏':'–ù–µ—Ç';
    const card = document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <span class="badge ${badgeClass}">${badgeText}</span>
      <img src="${i.img}" alt="${i.name}">
      <h3>${i.name}</h3>
      <div class="price">
        1 —Å—É—Ç–∫–∏: ${i.p1} ‚ÇΩ<br>
        2 —Å—É—Ç–æ–∫: ${i.p2} ‚ÇΩ<br>
        3 —Å—É—Ç–æ–∫: ${i.p3} ‚ÇΩ<br>
        –æ—Ç 5 —Å—É—Ç–æ–∫: ${i.p5} ‚ÇΩ
      </div>
      <div class="card-details"><p>${i.desc.replace(/\|/g,'<br>')}</p></div>
      <button onclick='openOrder("${i.name}")'>–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>
    `;
    card.addEventListener("click",function(e){
      if(!e.target.closest("button")) card.classList.toggle("open");
    });
    cont.appendChild(card);
  });
}

// --- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑ ---
function openOrder(name){
  cartItem = name;
  document.getElementById("orderBox").style.display="flex";
}
function closeOrder(){document.getElementById("orderBox").style.display="none";}
function sendOrder(){
  const name = document.getElementById("clientName").value.trim();
  const phone = document.getElementById("clientPhone").value.trim();
  if(!name||!phone) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
  let text = `–ó–ê–ö–ê–ó:${cartItem}%0A–ò–º—è: ${name}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;
  window.open("https://t.me/MaxApp?text="+text,"_blank");
  closeOrder();
}
</script>
</body>
</html>





