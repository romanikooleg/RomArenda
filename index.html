<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f3f3f3}
header{background:#1f2937;color:#fff;padding:10px;text-align:center}
header img{height:60px;margin-bottom:5px}
.controls{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;padding:10px;background:#fff}
input,select{padding:8px;border-radius:6px;border:1px solid #ccc}
.container{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:15px;padding:15px}
.card{background:#fff;border-radius:12px;box-shadow:0 2px 5px rgba(0,0,0,.2);padding:10px;display:flex;flex-direction:column}
.card img{width:100%;height:180px;object-fit:cover;border-radius:10px}
.badge{padding:4px 8px;border-radius:6px;color:#fff;font-size:12px;width:fit-content}
.yes{background:#16a34a}
.no{background:#dc2626}
.price{font-weight:bold;margin-top:5px}
button{margin-top:6px;padding:8px;border:none;border-radius:8px;background:#25D366;color:white;font-size:14px;cursor:pointer}
.cartBtn{background:#2563eb}
#cartBox{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;justify-content:center;align-items:center}
#cart{background:#fff;padding:15px;border-radius:12px;width:90%;max-width:400px}
.cartItem{border-bottom:1px solid #ddd;padding:5px}
@media(max-width:600px){
.card img{height:150px}
}
</style>
</head>

<body>

<header>
<img src="logo.png" alt="–†–æ–º–ê—Ä–µ–Ω–¥–∞">
<h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
<p>üìû +7 915 277 24 41</p>
</header>

<div class="controls">
<input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
<select id="categoryFilter"><option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
<select id="sortPrice">
<option value="none">–ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</option>
<option value="asc">–¶–µ–Ω–∞ ‚Üë</option>
<option value="desc">–¶–µ–Ω–∞ ‚Üì</option>
</select>
<button class="cartBtn" onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</button>
</div>

<div class="container" id="products"></div>

<div id="cartBox">
<div id="cart">
<h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
<div id="cartItems"></div>
<input id="clientName" placeholder="–í–∞—à–µ –∏–º—è"><br><br>
<input id="clientPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"><br><br>
<button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</button>
<button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
</div>

<script>
const sheetURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let products=[];
let cart=[];

fetch(sheetURL).then(r=>r.text()).then(csv=>{
const rows=csv.split("\n").slice(1).filter(r=>r.trim()!=="");
products=rows.map(r=>{
const c=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
return{
cat:c[0],
name:c[1],
desc:c[2]?.replaceAll('"',''),
img:c[3],
p1:Number(c[4]),
p2:Number(c[5]),
p3:Number(c[6]),
p5:Number(c[7]),
avail:c[8]
};
});
initFilters();
render(products);
});

function initFilters(){
const f=document.getElementById("categoryFilter");
[...new Set(products.map(p=>p.cat))].forEach(cat=>{
const o=document.createElement("option");
o.value=cat;o.textContent=cat;f.appendChild(o);
});
}

function render(list){
const cont=document.getElementById("products");
cont.innerHTML="";
list.forEach(i=>{
const badge=i.avail==="–î–∞"?"yes":"no";
const card=document.createElement("div");
card.className="card";
card.innerHTML=`
<span class="badge ${badge}">${i.avail==="–î–∞"?"–í –Ω–∞–ª–∏—á–∏–∏":"–ù–µ—Ç"}</span>
<img src="${i.img}">
<h3>${i.name}</h3>
<p>${i.desc}</p>
<div class="price">
1 —Å—É—Ç–∫–∏: ${i.p1} ‚ÇΩ<br>
2 —Å—É—Ç–æ–∫: ${i.p2} ‚ÇΩ<br>
3 —Å—É—Ç–æ–∫: ${i.p3} ‚ÇΩ<br>
–æ—Ç 5 —Å—É—Ç–æ–∫: ${i.p5} ‚ÇΩ
</div>
<button onclick='addCart("${i.name}",${i.p1})'>–í –∫–æ—Ä–∑–∏–Ω—É</button>
<a href="https://t.me/ArendMSK" target="_blank"><button>–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button></a>
`;
cont.appendChild(card);
});
}

function addCart(name,price){
cart.push({name,price});
document.getElementById("cartCount").textContent=cart.length;
}

function openCart(){
document.getElementById("cartBox").style.display="flex";
renderCart();
}
function closeCart(){
document.getElementById("cartBox").style.display="none";
}

function renderCart(){
const box=document.getElementById("cartItems");
box.innerHTML="";
cart.forEach(i=>{
const d=document.createElement("div");
d.className="cartItem";
d.textContent=i.name+" - "+i.price+" ‚ÇΩ";
box.appendChild(d);
});
}

function sendOrder(){
if(!cart.length) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
const name=document.getElementById("clientName").value;
const phone=document.getElementById("clientPhone").value;
if(!name||!phone) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");

let text="–ó–ê–ö–ê–ó:%0A";
cart.forEach(i=>text+=`${i.name} - ${i.price}‚ÇΩ%0A`);
text+=`–ò–º—è: ${name}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;

window.open("https://t.me/ArendMSK?text="+text,"_blank");
}
</script>

</body>
</html>








