<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞. –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ, —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –∏ –æ–Ω–ª–∞–π–Ω-–∑–∞–∫–∞–∑–æ–º.">
<meta name="keywords" content="–∞—Ä–µ–Ω–¥–∞, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π, RomArenda, –∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –¥–æ—Å—Ç–∞–≤–∫–∞">
<meta name="robots" content="index, follow">

<style>
:root {
  --main-yellow: #FFC107;
  --main-black: #1F1F1F;
  --light-gray: #F3F3F3;
  --white: #FFFFFF;
}

/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
body { margin:0; font-family: Arial, sans-serif; background: var(--light-gray); color: var(--main-black);}
a{text-decoration:none;}

/* HEADER */
header {background: var(--main-black); color: var(--white); padding:15px 20px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;}
header .logo {display:flex; align-items:center; gap:12px;}
header .logo img{height:60px; border-radius:8px; object-fit:contain; transition:0.3s;}
header .logo img:hover{transform:scale(1.1);}
header h1{margin:0; font-size:22px;}
header .phone{font-size:18px; font-weight:bold;}

/* –ü–ª–∏—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
.categories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill,minmax(180px,1fr));
  gap: 20px;
  padding: 20px;
}
.category-tile {
  background: var(--white);
  border-radius: 12px;
  box-shadow:0 2px 5px rgba(0,0,0,0.15);
  padding: 20px;
  text-align: center;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}
.category-tile:hover {transform: translateY(-5px); box-shadow:0 8px 15px rgba(0,0,0,0.2);}
.category-tile h3 {margin:0; font-size:16px;}

/* –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" */
#backBtn {
  display:none;
  margin: 10px 20px;
  padding: 10px 18px;
  background: var(--main-yellow);
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition:0.3s;
}
#backBtn:hover {transform: scale(1.05);}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ */
.container {display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:20px; padding:20px; display:none;}
.card {background: var(--white); border-radius:12px; box-shadow:0 2px 5px rgba(0,0,0,0.15); padding:10px; display:flex; flex-direction:column; transition:transform 0.3s, box-shadow 0.3s; cursor:pointer; overflow:hidden; opacity:0; animation:fadeIn 0.5s forwards;}
.card:hover{transform:translateY(-5px); box-shadow:0 8px 15px rgba(0,0,0,0.2);}
.card img{width:100%; height:180px; object-fit:cover; border-radius:10px; transition:0.3s;}
.card img:hover{transform:scale(1.05);}
.badge {padding:4px 8px; border-radius:6px; color:var(--main-black); font-size:12px; width:fit-content; margin-bottom:5px; font-weight:bold;}
.yes {background: var(--main-yellow);}
.no {background:#dc2626;}
.price {font-weight:bold; margin-top:5px;}
.card button {margin-top:6px; color:var(--main-black); padding:8px; border:none; border-radius:8px; font-size:14px; cursor:pointer; transition:0.3s;}
.card button:hover{transform:scale(1.05); box-shadow:0 4px 10px rgba(0,0,0,0.25);}
.card-details {max-height:0; overflow:hidden; transition:max-height 0.5s ease, padding 0.5s ease;}
.card.open .card-details{max-height:200px; padding-top:10px;}

/* –ö–æ—Ä–∑–∏–Ω–∞ */
#cartBox {position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:999;}
#cart {background:var(--white); padding:20px; border-radius:12px; width:90%; max-width:400px; max-height:90%; overflow-y:auto; box-shadow:0 4px 15px rgba(0,0,0,0.25);}
#cart h3{margin-top:0;}
.cartItem{border-bottom:1px solid #ddd; padding:6px 0; font-size:14px;}
.sticky-order-btn{position:fixed; bottom:15px; left:50%; transform:translateX(-50%); background:var(--main-yellow); padding:12px 20px; border-radius:8px; font-weight:bold; z-index:300; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.25); transition:0.3s;}
.sticky-order-btn:hover{transform:translateX(-50%) scale(1.05);}

/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal {display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000;}
.modal-content {background: var(--white); padding:20px; border-radius:12px; max-width:500px; width:90%; max-height:80%; overflow-y:auto; box-shadow:0 4px 15px rgba(0,0,0,0.25);}
.modal-content h3 {margin-top:0;}
.close-btn {background:#dc2626; color:#fff; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; float:right;}
.close-btn:hover{opacity:0.8;}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes fadeIn{from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);}}

/* –ê–¥–∞–ø—Ç–∏–≤ */
@media(max-width:600px){.categories-grid{grid-template-columns: repeat(auto-fill,minmax(140px,1fr));} .card img{height:150px;}}
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="logo.png" alt="–†–æ–º–ê—Ä–µ–Ω–¥–∞">
    <h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
  </div>
  <div class="phone">üìû +7 915 277 24 41</div>
</header>

<!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é" -->
<button id="backBtn" onclick="backToMain()">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>

<!-- –ì–ª–∞–≤–Ω–∞—è –ø–ª–∏—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
<div class="categories-grid" id="categoriesGrid"></div>

<!-- –¢–æ–≤–∞—Ä—ã -->
<div class="container" id="products"></div>

<!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
<div id="cartBox">
  <div id="cart">
    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
    <div id="cartItems"></div>
    <input id="clientName" placeholder="–í–∞—à–µ –∏–º—è"><br><br>
    <input id="clientPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"><br><br>
    <button onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</button>
    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<div class="modal" id="modalInfo">
  <div class="modal-content" id="modalContent">
    <button class="close-btn" onclick="closeModal()">X</button>
    <div id="modalBody"></div>
  </div>
</div>

<button class="sticky-order-btn" onclick="openCart()">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å</button>

<script>
// URL –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã CSV
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let products = [];
let cart = JSON.parse(localStorage.getItem('cart')) || [];
document.getElementById("cartCount")?.textContent = cart.length;

// --- –ó–∞–≥—Ä—É–∑–∫–∞ CSV ---
fetch(sheetURL)
  .then(r => r.text())
  .then(csv => {
    const rows = csv.split("\n").slice(1)
      .map(r => r.trim())
      .filter(r => r !== "");

    const tempProducts = rows.map(r => {
      const c = r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
      if(!c[0] || !c[1]) return null;
      return {
        cat: c[0].trim(),
        name: c[1].trim(),
        desc: c[2] ? c[2].replace(/"/g, '').replace(/\n/g, '|') : '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
        img: c[3] ? c[3].trim() : 'https://via.placeholder.com/300x180.png?text=–ù–µ—Ç+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
        p1: c[4] ? Number(c[4]) : 0,
        p2: c[5] ? Number(c[5]) : 0,
        p3: c[6] ? Number(c[6]) : 0,
        p5: c[7] ? Number(c[7]) : 0,
        avail: c[8] ? c[8].trim().replace(/"/g,'').toLowerCase() === "–¥–∞" : false
      };
    }).filter(p => p !== null);

    const seen = new Set();
    products = tempProducts.filter(p => {
      const key = p.name.toLowerCase();
      if(seen.has(key)) return false;
      seen.add(key);
      return true;
    });

    renderCategoryTiles();
    initFilters();
  });

// --- –ü–ª–∏—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π ---
function renderCategoryTiles() {
  const grid = document.getElementById("categoriesGrid");
  const categories = [...new Set(products.map(p => p.cat))];

  categories.forEach(cat => {
    const tile = document.createElement("div");
    tile.className = "category-tile";
    tile.innerHTML = `<h3>${cat}</h3>`;
    tile.onclick = () => {
      document.getElementById("products").style.display="grid";
      document.getElementById("categoriesGrid").style.display="none";
      document.getElementById("backBtn").style.display="inline-block";
      document.getElementById("categoryFilter").value = cat;
      applyFilters();
      window.scrollTo({ top: 100, behavior: 'smooth' });
    };
    grid.appendChild(tile);
  });

  const infoTiles = [
    {name: "–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã", content: "1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫ –∞—Ä–µ–Ω–¥—ã ‚Äî 1 —Å—É—Ç–∫–∏.<br>2. –ü—Ä–∏ –∞—Ä–µ–Ω–¥–µ –±–æ–ª–µ–µ 5 —Å—É—Ç–æ–∫ ‚Äî —Å–∫–∏–¥–∫–∞ 10%.<br>3. –ó–∞–ª–æ–≥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞."},
    {name: "–î–æ—Å—Ç–∞–≤–∫–∞", content: "–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ú–æ—Å–∫–≤–µ –∏ –ú–û.<br>–°—Ç–æ–∏–º–æ—Å—Ç—å: 300 ‚ÇΩ.<br>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 2-4 —á–∞—Å–∞."},
    {name: "–ö–æ–Ω—Ç–∞–∫—Ç—ã", content: "üìû +7 915 277 24 41<br>Telegram: t.me/ArendMSK<br>Email: info@romarenda.ru"}
  ];

  infoTiles.forEach(info => {
    const tile = document.createElement("div");
    tile.className = "category-tile";
    tile.innerHTML = `<h3>${info.name}</h3>`;
    tile.onclick = () => openModal(info.content);
    grid.appendChild(tile);
  });
}

// --- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" ---
function backToMain() {
  document.getElementById("products").style.display="none";
  document.getElementById("categoriesGrid").style.display="grid";
  document.getElementById("backBtn").style.display="none";
}

// --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ---
function openModal(content){
  document.getElementById("modalBody").innerHTML = content;
  document.getElementById("modalInfo").style.display = "flex";
}
function closeModal(){
  document.getElementById("modalInfo").style.display = "none";
}

// --- –§–∏–ª—å—Ç—Ä—ã ---
function initFilters() {
  const f = document.getElementById("categoryFilter");
  if(!f) return;
  [...new Set(products.map(p => p.cat))].forEach(cat => {
    const o = document.createElement("option");
    o.value = cat;
    o.textContent = cat;
    f.appendChild(o);
  });
}

function applyFilters() {
  let filtered = [...products];
  const search = document.getElementById("search")?.value.toLowerCase();
  const cat = document.getElementById("categoryFilter")?.value;
  const sort = document.getElementById("sortPrice")?.value;
  const available = document.getElementById("availableOnly")?.checked;

  if(cat && cat !== "all") filtered = filtered.filter(p => p.cat === cat);
  if(search) filtered = filtered.filter(p => p.name.toLowerCase().includes(search));
  if(available) filtered = filtered.filter(p => p.avail);
  if(sort==="asc") filtered.sort((a,b)=>a.p1-b.p1);
  if(sort==="desc") filtered.sort((a,b)=>b.p1-a.p1);

  render(filtered);
}

// --- –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ ---
function render(list) {
  const cont = document.getElementById("products");
  cont.innerHTML = "";
  list.forEach(i => {
    const badgeClass = i.avail ? "yes" : "no";
    const badgeText = i.avail ? "–í –Ω–∞–ª–∏—á–∏–∏" : "–ù–µ—Ç";
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <span class="badge ${badgeClass}">${badgeText}</span>
      <img src="${i.img}" alt="${i.name}">
      <h3>${i.name}</h3>
      <div class="price">
        1 —Å—É—Ç–∫–∏: ${i.p1} ‚ÇΩ<br>
        2 —Å—É—Ç–æ–∫: ${i.p2} ‚ÇΩ<br>
        3 —Å—É—Ç–æ–∫: ${i.p3} ‚ÇΩ<br>
        –æ—Ç 5 —Å—É—Ç–æ–∫: ${i.p5} ‚ÇΩ
      </div>
      <div class="card-details"><p>${i.desc}</p></div>
      <button onclick='addCart("${i.name}",${i.p1})'>–í –∫–æ—Ä–∑–∏–Ω—É</button>
      <button onclick='fastOrder("${i.name}",${i.p1})'>–ó–∞–∫–∞–∑–∞—Ç—å –≤ –ú–ê–ö–°</button>
    `;
    card.addEventListener("click", function(e){
      if(!e.target.closest("button")) card.classList.toggle("open");
    });
    cont.appendChild(card);
  });
}

// --- –ö–æ—Ä–∑–∏–Ω–∞ ---
function addCart(name, price) {
  cart.push({name, price});
  localStorage.setItem('cart', JSON.stringify(cart));
  document.getElementById("cartCount")?.textContent = cart.length;
}
function openCart() {document.getElementById("cartBox").style.display="flex"; renderCart();}
function closeCart() {document.getElementById("cartBox").style.display="none";}
function renderCart() {
  const box = document.getElementById("cartItems");
  box.innerHTML = "";
  cart.forEach(i => {
    const d = document.createElement("div");
    d.className = "cartItem";
    d.textContent = i.name + " - " + i.price + " ‚ÇΩ";
    box.appendChild(d);
  });
}

// --- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑ –≤ –ú–ê–ö–° ---
function fastOrder(name, price) {
  if(typeof MaxApp !== "undefined" && MaxApp.sendData){
    MaxApp.sendData({name, price});
    alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –ú–ê–ö–°!");
  } else {
    alert("MaxApp –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–∑–∏–Ω—É.");
  }
}

// --- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ ---
function sendOrder() {
  if(!cart.length) return alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
  const name = document.getElementById("clientName").value.trim();
  const phone = document.getElementById("clientPhone").value.trim();
  if(!name || !phone) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
  let text = "–ó–ê–ö–ê–ó:%0A";
  cart.forEach(i => text+=`${i.name} - ${i.price}‚ÇΩ%0A`);
  text += `–ò–º—è: ${name}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;
  window.open("https://t.me/ArendMSK?text="+text,"_blank");
}
</script>
</body>
</html>




