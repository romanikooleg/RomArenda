<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</title>

<meta name="description" content="–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –∞—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞. –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑, —á–µ—Å—Ç–Ω—ã–µ —Ü–µ–Ω—ã, —É–¥–æ–±–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥.">
<meta name="keywords" content="–∞—Ä–µ–Ω–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –ø—Ä–æ–∫–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –†–æ–º–ê—Ä–µ–Ω–¥–∞">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#FFC107">

<style>
:root {
--yellow:#FFC107;
--black:#1F1F1F;
--white:#fff;
--gray:#f3f3f3;
}

body{margin:0;font-family:Arial;background:var(--gray);}
header{background:var(--black);padding:12px 20px;}
.header-inner{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:auto;}
.brand{display:flex;align-items:center;gap:10px;color:var(--yellow);}
.brand img{height:55px;border-radius:8px;}
.phone{background:var(--yellow);padding:10px 16px;border-radius:10px;font-weight:bold;}

.controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;padding:10px;background:#fff;position:sticky;top:0;z-index:10;}

.container{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;padding:20px;}

.card{
background:#fff;border-radius:12px;padding:10px;
box-shadow:0 2px 6px rgba(0,0,0,.15);
transition:.3s;
animation:fade .4s;
cursor:pointer;
}
.card:hover{transform:scale(1.03);}
.card img{width:100%;height:170px;object-fit:cover;border-radius:10px;}

.badge{padding:4px 8px;border-radius:6px;font-size:12px;font-weight:bold;}
.yes{background:var(--yellow);}
.no{background:#dc2626;color:#fff;}

button{
background:var(--yellow);
border:none;
padding:10px;
border-radius:8px;
font-weight:bold;
cursor:pointer;
transition:.2s;
}
button:hover{transform:scale(1.05);}

@keyframes fade{
from{opacity:0;transform:translateY(10px);}
to{opacity:1;transform:translateY(0);}
}

/* MODAL */
#modal{
position:fixed;inset:0;
background:rgba(0,0,0,.6);
display:none;
justify-content:center;
align-items:center;
z-index:999;
}
.modal-card{
background:#fff;
border-radius:12px;
max-width:400px;
width:90%;
padding:15px;
animation:zoom .3s;
}
@keyframes zoom{
from{transform:scale(.7);}
to{transform:scale(1);}
}

/* Quick order */
.quick{
margin-top:10px;
display:flex;
gap:8px;
}

.install{
position:fixed;
bottom:15px;
right:15px;
background:#000;
color:#fff;
padding:10px 14px;
border-radius:10px;
display:none;
}
</style>
</head>
<body>

<header>
<div class="header-inner">
<div class="brand">
<img src="logo.png">
<h2>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h2>
</div>
<div class="phone">üìû +7 915 277 24 41</div>
</div>
</header>

<div class="controls">
<input id="search" placeholder="–ü–æ–∏—Å–∫">
<select id="categoryFilter"><option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
</div>

<div class="container" id="products"></div>

<!-- MODAL -->
<div id="modal">
<div class="modal-card" id="modalContent"></div>
</div>

<button class="install" id="installBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>

<script>
const sheetURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let products=[];

fetch(sheetURL).then(r=>r.text()).then(csv=>{
const rows=csv.split("\n").slice(1);
products=rows.map(r=>{
const c=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
return{
cat:c[0],
name:c[1],
desc:c[2],
img:c[3]||"https://via.placeholder.com/300",
price:c[4],
avail:(c[8]||"").toLowerCase().includes("–¥–∞")
}
});
initFilters();
render(products);
});

function initFilters(){
[...new Set(products.map(p=>p.cat))].forEach(cat=>{
const o=document.createElement("option");
o.value=cat;o.textContent=cat;
categoryFilter.appendChild(o);
});
}

search.oninput=()=>apply();
categoryFilter.onchange=()=>apply();

function apply(){
let list=[...products];
if(search.value) list=list.filter(p=>p.name.toLowerCase().includes(search.value.toLowerCase()));
if(categoryFilter.value!=="all") list=list.filter(p=>p.cat===categoryFilter.value);
render(list);
}

function render(list){
products.innerHTML="";
list.forEach(p=>{
const card=document.createElement("div");
card.className="card";
card.innerHTML=`
<span class="badge ${p.avail?"yes":"no"}">${p.avail?"–í –Ω–∞–ª–∏—á–∏–∏":"–ù–µ—Ç"}</span>
<img src="${p.img}">
<h3>${p.name}</h3>
<p><b>${p.price} ‚ÇΩ / —Å—É—Ç–∫–∏</b></p>
<button>–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
`;
card.onclick=()=>openModal(p);
products.appendChild(card);
});
}

function openModal(p){
modal.style.display="flex";
modalContent.innerHTML=`
<h3>${p.name}</h3>
<img src="${p.img}" style="width:100%;border-radius:10px;">
<p>${p.desc}</p>
<p><b>${p.price} ‚ÇΩ / —Å—É—Ç–∫–∏</b></p>

<div class="quick">
<button onclick="quickOrder('${p.name}',${p.price})">–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑</button>
<button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>
`;
}

function closeModal(){modal.style.display="none";}

function quickOrder(name,price){
let text=`–ë–´–°–¢–†–´–ô –ó–ê–ö–ê–ó\n${name} - ${price}‚ÇΩ`;
window.open("https://t.me/ArendMSK?text="+encodeURIComponent(text));
}

/* PWA */
if('serviceWorker' in navigator){
navigator.serviceWorker.register('sw.js');
}

let deferredPrompt;
window.addEventListener('beforeinstallprompt',e=>{
e.preventDefault();
deferredPrompt=e;
installBtn.style.display="block";
});

installBtn.onclick=()=>{
deferredPrompt.prompt();
};
</script>

</body>
</html>





