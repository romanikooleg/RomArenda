<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –ü—Ä–æ–∫–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ –ú–æ—Å–∫–≤–µ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="logo.png">

<style>
:root {
  --main-yellow: #FFC107;
  --main-black: #1F1F1F;
  --light-gray: #F8F9FA;
  --white: #FFFFFF;
  --tg-blue: #0088cc;
  --text-gray: #444;
}

body { margin:0; font-family: 'Segoe UI', Roboto, sans-serif; background: var(--light-gray); color: var(--main-black); line-height: 1.6;}

/* –®–∞–ø–∫–∞ */
header {background: var(--main-black); color: var(--white); padding:20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);}
.header-content { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; }
.logo-area { display: flex; align-items: center; gap: 15px; }
header img { height: 80px; border-radius: 10px; }
.title-block h1 { margin: 0; font-size: 2em; letter-spacing: 1px; }
.slogan { font-size: 0.9em; color: var(--main-yellow); font-weight: 500; margin-top: 5px; }
.contact-header { text-align: right; }
.contact-header a { color: var(--main-yellow); font-size: 1.4em; font-weight: bold; text-decoration: none; }

/* –§–∏–ª—å—Ç—Ä—ã –∏ –ü–æ–∏—Å–∫ */
.controls-bg { background: var(--white); border-bottom: 1px solid #ddd; position: sticky; top: 0; z-index: 100; }
.controls { max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; gap: 15px; padding: 15px 20px; justify-content: center; }
.controls input, .controls select { padding: 12px 15px; border-radius: 8px; border: 1px solid #ccc; font-size: 15px; outline: none; min-width: 250px; }
.controls input:focus { border-color: var(--main-yellow); }

/* –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ */
.container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; padding: 30px 20px; max-width: 1200px; margin: 0 auto; }
.card { background: var(--white); border-radius: 18px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; display: flex; flex-direction: column; position: relative; border: 1px solid #eee; }
.card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0,0,0,0.1); }
.card img { width: 100%; height: 200px; object-fit: cover; background: #eee; }
.card-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
.card h3 { margin: 0 0 10px 0; font-size: 1.2em; color: #222; }
.price { font-size: 1.4em; font-weight: 800; color: #000; margin-bottom: 10px; }
.card-details { font-size: 0.9em; color: #666; margin-bottom: 15px; display: none; }
.card.open .card-details { display: block; }

/* –ö–Ω–æ–ø–∫–∏ */
button { padding: 12px; border: none; border-radius: 10px; font-size: 14px; cursor: pointer; font-weight: bold; transition: 0.2s; }
.cartBtn { background: var(--main-yellow); color: var(--main-black); margin-bottom: 8px; width: 100%; }
.oneClickBtn { background: var(--main-black); color: white; width: 100%; }
.oneClickBtn:hover { background: #333; }

/* –ë–ª–æ–∫ —É—Å–ª–æ–≤–∏–π –∞—Ä–µ–Ω–¥—ã (–ü—É–Ω–∫—Ç 4) */
.terms-section { max-width: 900px; margin: 40px auto; padding: 40px 20px; background: var(--white); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
.terms-section h2 { border-bottom: 3px solid var(--main-yellow); display: inline-block; margin-bottom: 25px; }
.term-block { margin-bottom: 30px; }
.term-block h3 { color: var(--tg-blue); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
.term-block ul { padding-left: 20px; }
.term-block li { margin-bottom: 8px; }
.highlight-box { background: #fffde7; border-left: 5px solid var(--main-yellow); padding: 15px; margin: 15px 0; border-radius: 0 10px 10px 0; }

/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ —Å–≤—è–∑–∏ (–ü—É–Ω–∫—Ç 2) */
.fab { position: fixed; bottom: 30px; right: 30px; background: #25D366; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 20px rgba(0,0,0,0.2); cursor: pointer; z-index: 1000; text-decoration: none; font-size: 30px; transition: 0.3s; }
.fab:hover { transform: scale(1.1); }

/* –ö–æ—Ä–∑–∏–Ω–∞ */
#cartBox { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; padding: 10px; }
#cart { background: var(--white); padding: 30px; border-radius: 25px; width: 100%; max-width: 450px; position: relative; }
.cartItem { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .header-content { flex-direction: column; text-align: center; }
  .logo-area { flex-direction: column; }
  .title-block { margin: 15px 0; }
  .contact-header { text-align: center; }
}
</style>
</head>
<body>

<header>
  <div class="header-content">
    <div class="logo-area">
      <img src="logo.png" alt="–†–æ–º–ê—Ä–µ–Ω–¥–∞">
      <div class="title-block">
        <h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
        <div class="slogan">–ê—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ‚Ä¢ –ë—ã—Å—Ç—Ä–æ ‚Ä¢ –ë–µ–∑ –∑–∞–ª–æ–≥–∞ ‚Ä¢ –ó–∞–∫–∞–∑ –≤ 1 –∫–ª–∏–∫</div>
      </div>
    </div>
    <div class="contact-header">
      <a href="tel:+79152772441">+7 915 277 24 41</a>
    </div>
  </div>
</header>

<div class="controls-bg">
  <div class="controls">
    <input id="search" placeholder="üîç –ß—Ç–æ –∏—â–µ–º? (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ü–∏–ª–∞)">
    <select id="categoryFilter"><option value="all">üìÅ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
    <button class="cartBtn" onclick="openCart()" style="width: auto; padding: 10px 25px;">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</button>
  </div>
</div>

<div class="container" id="products"></div>

<section class="terms-section">
  <h2>‚úÖ –£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã</h2>
  
  <div class="term-block">
    <h3>–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–¥ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±–µ—Å–ø–µ—á–∏—Ç–µ–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂</h3>
    <ul>
      <li><b>–î–æ–∫—É–º–µ–Ω—Ç—ã:</b> –û—Ä–∏–≥–∏–Ω–∞–ª –ø–∞—Å–ø–æ—Ä—Ç–∞ –†–§ —Å –ø—Ä–æ–ø–∏—Å–∫–æ–π (–ú–æ—Å–∫–≤–∞ –∏–ª–∏ –ú–û –¥–æ 250 –∫–º).</li>
      <li><b>–î–æ–≥–æ–≤–æ—Ä:</b> –ó–∞–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ (–Ω—É–∂–µ–Ω –¥–µ–π—Å—Ç–≤—É—é—â–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω).</li>
      <li><b>–ó–∞–ª–æ–≥:</b> –í–Ω–æ—Å–∏—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∞—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞.</li>
    </ul>
  </div>

  <div class="term-block">
    <h3>–í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–µ—Å–ø–µ—á–∏—Ç–µ–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂ (80%)</h3>
    <p>–ï—Å–ª–∏ –Ω–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ –ø–∞—Å–ø–æ—Ä—Ç–∞ –†–§ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–ø–∏—Å–∫–∞ –ú—Å–∫/–ú–û. –í–Ω–æ—Å–∏—Ç—Å—è 80% —Ä—ã–Ω–æ—á–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.</p>
  </div>

  <div class="highlight-box">
    <h3>üåü –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ ¬´–î–æ–≤–µ—Ä–∏–µ¬ª</h3>
    <p>–ê—Ä–µ–Ω–¥–∞ <b>–ë–ï–ó –ó–ê–õ–û–ì–ê</b> –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Å–ª–µ 3-–π —É—Å–ø–µ—à–Ω–æ–π –∞—Ä–µ–Ω–¥—ã –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤–æ–≤—Ä–µ–º—è, –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ –∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ–ø–∏—Å–∫–∏ –ú—Å–∫/–ú–û.</p>
  </div>

  <div class="term-block">
    <h3>‚úÖ –î–æ—Å—Ç–∞–≤–∫–∞ –∏ –í–æ–∑–≤—Ä–∞—Ç</h3>
    <ul>
      <li><b>–†–∞–π–æ–Ω—ã:</b> –¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏, –ü–µ—á–∞—Ç–Ω–∏–∫–∏, –ö—É–∑—å–º–∏–Ω–∫–∏. –ü—Ä–∏–≤–µ–∑–µ–º –æ—Ç 30 –º–∏–Ω—É—Ç!</li>
      <li><b>–ë–æ–Ω—É—Å –ø–æ –≤—Ä–µ–º–µ–Ω–∏:</b> –î–∞–µ–º +2 —á–∞—Å–∞ –Ω–∞ –¥–æ—Ä–æ–≥—É. –í–∑—è–ª–∏ –≤ 12:00 ‚Äî –≤–µ—Ä–Ω—É—Ç—å –Ω—É–∂–Ω–æ –¥–æ 14:00.</li>
      <li><b>–í–∞–∂–Ω–æ:</b> –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º.</li>
    </ul>
  </div>

  <div class="term-block">
    <h3>üí∞ –°–ø–µ—Ü—Ç–∞—Ä–∏—Ñ—ã</h3>
    <p><b>–¢–∞—Ä–∏—Ñ ¬´–í–µ—á–µ—Ä–Ω–∏–π¬ª:</b> –° 17:00 –¥–æ 10:00 —É—Ç—Ä–∞ ‚Äî –æ–ø–ª–∞—Ç–∞ 0.5 —Å—É—Ç–æ–∫.</p>
    <p><b>–¢–∞—Ä–∏—Ñ ¬´–í—ã—Ö–æ–¥–Ω—ã–µ¬ª:</b> –ü—è—Ç–Ω–∏—Ü–∞ –≤–µ—á–µ—Ä ‚Äî –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ —É—Ç—Ä–æ. –û–ø–ª–∞—Ç–∞ –∑–∞ 2 —Å—É—Ç–æ–∫ –≤–º–µ—Å—Ç–æ 3-—Ö!</p>
  </div>

  <div style="font-size: 0.8em; color: #888; border-top: 1px solid #eee; pt: 10px;">
    * –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –±–∞–∑–∞–º –§–°–°–ü –∏ –ú–í–î. –í —É—Å–ª—É–≥–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–∞–∑–∞–Ω–æ –≤ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ø–æ—Ä—è–¥–∫–µ.
  </div>
</section>

<a href="https://t.me/ArendMSK" class="fab" title="–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º">üí¨</a>

<div id="cartBox">
  <div id="cart">
    <h2 style="margin-top:0">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
    <div id="cartItems"></div>
    <div id="totalPrice" style="font-weight:bold; font-size: 1.2em; margin: 15px 0;"></div>
    
    <input id="clientName" placeholder="–í–∞—à–µ –∏–º—è" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd; box-sizing: border-box;">
    <input id="clientPhone" placeholder="+7 (___) ___-__-__" style="width:100%; padding:12px; margin-bottom:20px; border-radius:8px; border:1px solid #ddd; box-sizing: border-box;">
    
    <button onclick="sendOrder()" style="width:100%; background:var(--tg-blue); color:white; padding:15px;">–û–¢–ü–†–ê–í–ò–¢–¨ –í TELEGRAM</button>
    <button onclick="closeCart()" style="width:100%; background:none; color:#999; margin-top:10px;">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø–æ–∫—É–ø–∫–∞–º</button>
  </div>
</div>

<script>
const TG_TOKEN = "8575516738:AAGomt_lCqq1Uzdqf7D4UrReolJF_NKhYoM"; 
const TG_CHAT_ID = "8359415363"; 
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let products = [];
let cart = JSON.parse(localStorage.getItem('cart')) || [];
updateCartBadge();

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
fetch(sheetURL + "&v=" + new Date().getTime())
  .then(r => r.text())
  .then(csv => {
    const rows = csv.split("\n").slice(1).map(r => r.trim()).filter(r => r !== "");
    products = rows.map(r => {
      const c = r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
      return {
        cat: c[0].replace(/"/g, '').trim(),
        name: c[1].replace(/"/g, '').trim(),
        desc: c[2] ? c[2].replace(/"/g, '').replace(/\n/g, ' ') : '–û–ø–∏—Å–∞–Ω–∏–µ —É—Ç–æ—á–Ω—è–π—Ç–µ',
        img: c[3] ? c[3].trim() : 'logo.png',
        p1: c[4] ? Number(c[4]) : 0
      };
    }).filter(p => p.name);
    
    const cats = ['all', ...new Set(products.map(p => p.cat))];
    const select = document.getElementById("categoryFilter");
    cats.forEach(cat => {
      if(cat === 'all') return;
      const o = document.createElement("option"); o.value = cat; o.textContent = cat;
      select.appendChild(o);
    });

    render(products);
  });

function render(list) {
  const cont = document.getElementById("products");
  cont.innerHTML = "";
  list.forEach(i => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <img src="${i.img}" onerror="this.src='logo.png'">
      <div class="card-content">
        <h3>${i.name}</h3>
        <div class="price">${i.p1} ‚ÇΩ/—Å—É—Ç.</div>
        <div class="card-details">${i.desc}</div>
        <button class="cartBtn" onclick='addCart("${i.name}",${i.p1})'>üõí –í –∫–æ—Ä–∑–∏–Ω—É</button>
        <button class="oneClickBtn" onclick='orderOneClick("${i.name}")'>‚ö° –ó–∞–∫–∞–∑–∞—Ç—å –≤ 1 –∫–ª–∏–∫</button>
      </div>
    `;
    div.onclick = (e) => { if(e.target.tagName !== 'BUTTON') div.classList.toggle('open'); };
    cont.appendChild(div);
  });
}

// –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
document.getElementById("search").oninput = filter;
document.getElementById("categoryFilter").onchange = filter;
function filter() {
  const s = document.getElementById("search").value.toLowerCase();
  const c = document.getElementById("categoryFilter").value;
  let filtered = products.filter(p => p.name.toLowerCase().includes(s));
  if(c !== 'all') filtered = filtered.filter(p => p.cat === c);
  render(filtered);
}

// –ö–æ—Ä–∑–∏–Ω–∞ –∏ –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–ü—É–Ω–∫—Ç 6)
document.getElementById('clientPhone').oninput = function (e) {
  let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
  e.target.value = !x[2] ? x[1] : '+7 (' + x[2] + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
};

function addCart(name, price) {
  cart.push({name, price});
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartBadge();
}

function updateCartBadge() { document.getElementById("cartCount").textContent = cart.length; }
function openCart() { document.getElementById("cartBox").style.display="flex"; renderCart(); }
function closeCart() { document.getElementById("cartBox").style.display="none"; }

function renderCart() {
  const box = document.getElementById("cartItems");
  let total = 0;
  box.innerHTML = cart.length ? "" : "–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫–∞ –ø—É—Å—Ç–∞";
  cart.forEach((i, idx) => {
    total += i.price;
    box.innerHTML += `<div class="cartItem"><span>${i.name}</span> <b>${i.price}‚ÇΩ</b> <span onclick="removeFromCart(${idx})" style="color:red; cursor:pointer">‚úï</span></div>`;
  });
  document.getElementById("totalPrice").textContent = `–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ/—Å—É—Ç.`;
}

function removeFromCart(idx) {
  cart.splice(idx, 1);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartBadge();
  renderCart();
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ (–ü—É–Ω–∫—Ç 2: –≤ –±–æ—Ç)
async function sendToTG(txt) {
  await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ chat_id: TG_CHAT_ID, text: txt, parse_mode: 'HTML' })
  });
  alert("‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –û–ª–µ–≥ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.");
  cart = []; localStorage.removeItem('cart'); updateCartBadge(); closeCart();
}

function orderOneClick(name) {
  const p = prompt("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞ " + name + ":");
  if(p) sendToTG(`<b>‚ö° –ó–ê–ö–ê–ó –í 1 –ö–õ–ò–ö</b>\n\nüõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: ${name}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: ${p}`);
}

function sendOrder() {
  const n = document.getElementById("clientName").value;
  const p = document.getElementById("clientPhone").value;
  if(n.length < 2 || p.length < 10) return alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ!");
  
  let m = `<b>üõí –ù–û–í–´–ô –ó–ê–ö–ê–ó –° –°–ê–ô–¢–ê</b>\n\nüë§ –ò–º—è: ${n}\nüìû –¢–µ–ª: ${p}\n\n<b>–°–ø–∏—Å–æ–∫:</b>\n`;
  let total = 0;
  cart.forEach((i, idx) => { m += `${idx+1}. ${i.name} (${i.price}‚ÇΩ)\n`; total += i.price; });
  m += `\nüí∞ <b>–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ/—Å—É—Ç.</b>`;
  sendToTG(m);
}
</script>
</body>
</html>
