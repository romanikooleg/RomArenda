<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–†–æ–º–ê—Ä–µ–Ω–¥–∞ ‚Äî –ü—Ä–æ–∫–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="logo.png">

<style>
:root {
  --main-yellow: #FFC107;
  --main-black: #1F1F1F;
  --light-gray: #F4F7F6;
  --white: #FFFFFF;
  --tg-blue: #0088cc;
}

* { box-sizing: border-box; scroll-behavior: smooth; }
body { margin:0; font-family: 'Segoe UI', Arial, sans-serif; background: var(--light-gray); color: var(--main-black); }

/* –®–∞–ø–∫–∞ */
header { background: var(--main-black); color: var(--white); padding: 15px 20px; }
.header-top { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; }
.logo-box { display: flex; align-items: center; gap: 15px; }
header img { height: 70px; border-radius: 8px; }
.title-block h1 { margin: 0; font-size: 1.6em; }
.slogan { font-size: 0.8em; color: var(--main-yellow); }
.header-phone a { color: var(--main-yellow); font-size: 1.3em; font-weight: bold; text-decoration: none; }

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
nav { background: #2c2c2c; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: center; gap: 20px; padding: 12px; flex-wrap: wrap;}
nav a { color: white; text-decoration: none; font-size: 0.9em; font-weight: bold; text-transform: uppercase; transition: 0.3s;}
nav a:hover { color: var(--main-yellow); }

/* –°–µ–∫—Ü–∏–∏ */
section { max-width: 1200px; margin: 20px auto; padding: 20px; }
.section-title { border-left: 5px solid var(--main-yellow); padding-left: 15px; margin-bottom: 25px; font-size: 1.5em; }

/* –§–∏–ª—å—Ç—Ä—ã */
.search-bar { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; }
.search-bar input, .search-bar select { padding: 12px; border: 1px solid #ddd; border-radius: 8px; outline: none; min-width: 200px; }

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
.card { background: var(--white); border-radius: 15px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: 0.3s; display: flex; flex-direction: column; cursor: pointer; }
.card:hover { transform: translateY(-5px); }
.card img { width: 100%; height: 180px; object-fit: cover; }
.card-info { padding: 15px; flex-grow: 1; }
.card h3 { margin: 0 0 10px; font-size: 1.1em; }

/* –ü—Ä–∞–π—Å-–ª–∏—Å—Ç –≤ –∫–∞—Ä—Ç–æ—á–∫–µ */
.price-table { background: #f9f9f9; border-radius: 8px; padding: 10px; margin-bottom: 15px; font-size: 0.85em; }
.price-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 4px 0; }
.price-row:last-child { border: none; font-weight: bold; color: #000; }

.desc-text { font-size: 0.85em; color: #666; display: none; margin-top: 10px; }
.card.open .desc-text { display: block; }

/* –ö–Ω–æ–ø–∫–∏ */
button { width: 100%; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 5px; transition: 0.2s; }
.btn-cart { background: var(--main-yellow); color: #000; }
.btn-click { background: var(--main-black); color: #fff; }

/* –ë–ª–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞ */
.text-content { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); line-height: 1.7; }
.text-content h3 { color: var(--tg-blue); margin-top: 25px; }
.text-content li { margin-bottom: 10px; }

/* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ */
.fab { position: fixed; bottom: 20px; right: 20px; background: #25D366; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; text-decoration: none; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1000; }

/* –ö–æ—Ä–∑–∏–Ω–∞ */
#cartOverlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; padding: 15px; }
#cartModal { background: white; width: 100%; max-width: 450px; padding: 30px; border-radius: 20px; }

@media (max-width: 600px) {
  .header-top { flex-direction: column; text-align: center; gap: 15px; }
  .header-phone { text-align: center; }
  nav { gap: 10px; }
  nav a { font-size: 0.75em; }
}
</style>
</head>
<body>

<header>
  <div class="header-top">
    <div class="logo-box">
      <img src="logo.png" alt="–†–æ–º–ê—Ä–µ–Ω–¥–∞">
      <div class="title-block">
        <h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
        <div class="slogan">–ë—ã—Å—Ç—Ä–æ ‚Ä¢ –ë–µ–∑ –∑–∞–ª–æ–≥–∞ ‚Ä¢ –ó–∞–∫–∞–∑ –≤ 1 –∫–ª–∏–∫</div>
      </div>
    </div>
    <div class="header-phone">
      <a href="tel:+79152772441">+7 915 277 24 41</a>
    </div>
  </div>
</header>

<nav>
  <a href="#catalog">üõ† –ö–∞—Ç–∞–ª–æ–≥</a>
  <a href="#terms">üìú –£—Å–ª–æ–≤–∏—è</a>
  <a href="#delivery">üöö –î–æ—Å—Ç–∞–≤–∫–∞</a>
</nav>

<section id="catalog">
  <h2 class="section-title">–ö–∞—Ç–∞–ª–æ–≥ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞</h2>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞...">
    <select id="catSelect"><option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
    <button class="btn-cart" onclick="showCart()" style="width: auto; padding: 10px 20px;">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</button>
  </div>
  <div class="grid" id="productGrid"></div>
</section>

<section id="terms">
  <h2 class="section-title">–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã</h2>
  <div class="text-content">
    <h3>–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–¥ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±–µ—Å–ø–µ—á–∏—Ç–µ–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂</h3>
    <ul>
      <li><b>–î–æ–∫—É–º–µ–Ω—Ç—ã:</b> –û—Ä–∏–≥–∏–Ω–∞–ª –ø–∞—Å–ø–æ—Ä—Ç–∞ –†–§ (–ø—Ä–æ–ø–∏—Å–∫–∞ –ú–æ—Å–∫–≤–∞/–ú–û –¥–æ 250 –∫–º).</li>
      <li><b>–î–æ–≥–æ–≤–æ—Ä:</b> –û—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ –∑–∞ 5 –º–∏–Ω—É—Ç.</li>
      <li><b>–ó–∞–ª–æ–≥:</b> –ù–µ–±–æ–ª—å—à–∞—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞.</li>
    </ul>

    <h3>üåü –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ ¬´–î–æ–≤–µ—Ä–∏–µ¬ª</h3>
    <p>–ê—Ä–µ–Ω–¥—É–π—Ç–µ <b>–ë–ï–ó –ó–ê–õ–û–ì–ê</b>, –µ—Å–ª–∏ –≤—ã –Ω–∞—à –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (–±–æ–ª–µ–µ 3-—Ö —Ä–∞–∑), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –≤—Å—ë –≤–æ–≤—Ä–µ–º—è –∏ –∏–º–µ–µ—Ç–µ –ø—Ä–æ–ø–∏—Å–∫—É –≤ –ú—Å–∫/–ú–û.</p>

    <div style="background: #fff9c4; padding: 15px; border-radius: 10px; margin-top: 20px;">
      <b>‚ö†Ô∏è –í–∞–∂–Ω–æ:</b> –ú—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—ã –§–°–°–ü –∏ –ú–í–î –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–µ–π –∏ —Å—É–¥–∏–º–æ—Å—Ç–µ–π. –í –∞—Ä–µ–Ω–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–∞–∑–∞–Ω–æ –≤ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ø–æ—Ä—è–¥–∫–µ.
    </div>
  </div>
</section>

<section id="delivery">
  <h2 class="section-title">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑</h2>
  <div class="text-content">
    <p>üìç <b>–ü—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏:</b> –ü—Ä–∏–µ–∑–∂–∞–π—Ç–µ –∫ –Ω–∞–º, –æ–ø–ª–∞—á–∏–≤–∞–π—Ç–µ –Ω–∞ –º–µ—Å—Ç–µ –∏ –∑–∞–±–∏—Ä–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.</p>
    <p>üöÄ <b>–î–æ—Å—Ç–∞–≤–∫–∞:</b> –¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏, –ü–µ—á–∞—Ç–Ω–∏–∫–∏, –ö—É–∑—å–º–∏–Ω–∫–∏. –ü—Ä–∏–≤–µ–∑–µ–º –æ—Ç 30 –º–∏–Ω—É—Ç!</p>
    <p>üéÅ <b>–ë–æ–Ω—É—Å +2 —á–∞—Å–∞:</b> –ú—ã –ø–æ–Ω–∏–º–∞–µ–º –ø—Ä–æ–±–∫–∏. –í–∑—è–ª–∏ –≤ 12:00 ‚Äî –≤–µ—Ä–Ω—É—Ç—å –Ω—É–∂–Ω–æ –¥–æ 14:00 –≤ –¥–µ–Ω—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞.</p>
    
    <h3>üí∞ –°–ø–µ—Ü—Ç–∞—Ä–∏—Ñ—ã</h3>
    <ul>
      <li><b>–¢–∞—Ä–∏—Ñ ¬´–í–µ—á–µ—Ä–Ω–∏–π¬ª (0.5 —Å—É—Ç–æ–∫):</b> –í–∑—è–ª–∏ –ø–æ—Å–ª–µ 17:00 ‚Äî –≤–µ—Ä–Ω—É–ª–∏ –¥–æ 10:00.</li>
      <li><b>–¢–∞—Ä–∏—Ñ ¬´–í—ã—Ö–æ–¥–Ω—ã–µ¬ª:</b> –ü—è—Ç–Ω–∏—Ü–∞ (–≤–µ—á–µ—Ä) ‚Äî –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ (—É—Ç—Ä–æ). –û–ø–ª–∞—Ç–∞ –≤—Å–µ–≥–æ –∑–∞ 2-–µ —Å—É—Ç–æ–∫!</li>
    </ul>
  </div>
</section>

<a href="https://t.me/ArendMSK" class="fab">üí¨</a>

<div id="cartOverlay">
  <div id="cartModal">
    <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
    <div id="cartItems"></div>
    <hr>
    <p id="totalSum" style="font-weight:bold;"></p>
    <input type="text" id="userName" placeholder="–í–∞—à–µ –∏–º—è" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; border:1px solid #ddd;">
    <input type="text" id="userPhone" placeholder="+7 (___) ___-__-__" style="width:100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ddd;">
    <button class="btn-cart" style="background:var(--tg-blue); color:white" onclick="sendToTG()">–û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ö–ê–ó</button>
    <button onclick="hideCart()" style="background:none; color: #888;">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const TOKEN = "8575516738:AAGomt_lCqq1Uzdqf7D4UrReolJF_NKhYoM";
const CHAT_ID = "8359415363";
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

let tools = [];
let cart = [];

// –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
document.getElementById('userPhone').oninput = function(e){
  let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
  e.target.value = !x[2] ? x[1] : '+7 (' + x[2] + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
};

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
fetch(CSV_URL + "&cache=" + Date.now())
  .then(res => res.text())
  .then(data => {
    const rows = data.split('\n').slice(1);
    tools = rows.map(row => {
      const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
      return {
        cat: cols[0]?.replace(/"/g,'').trim(),
        name: cols[1]?.replace(/"/g,'').trim(),
        desc: cols[2]?.replace(/"/g,'').trim(),
        img: cols[3]?.trim() || 'logo.png',
        p1: cols[4]?.trim(), // 1 —Å—É—Ç–∫–∏
        p2: cols[5]?.trim(), // 2 —Å—É—Ç–æ–∫
        p3: cols[6]?.trim()  // 3+ —Å—É—Ç–æ–∫
      };
    }).filter(t => t.name);
    
    // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
    const cats = [...new Set(tools.map(t => t.cat))];
    cats.forEach(c => {
      let opt = document.createElement('option');
      opt.value = c; opt.textContent = c;
      document.getElementById('catSelect').appendChild(opt);
    });
    
    render(tools);
  });

function render(arr) {
  const grid = document.getElementById('productGrid');
  grid.innerHTML = '';
  arr.forEach(t => {
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <img src="${t.img}" onerror="this.src='logo.png'">
      <div class="card-info">
        <h3>${t.name}</h3>
        <div class="price-table">
          <div class="price-row"><span>1 —Å—É—Ç–∫–∏:</span> <span>${t.p1} ‚ÇΩ</span></div>
          ${t.p2 ? `<div class="price-row"><span>2 —Å—É—Ç–æ–∫:</span> <span>${t.p2} ‚ÇΩ</span></div>` : ''}
          ${t.p3 ? `<div class="price-row"><span>–æ—Ç 3 —Å—É—Ç–æ–∫:</span> <span>${t.p3} ‚ÇΩ</span></div>` : ''}
        </div>
        <div class="desc-text">${t.desc || '–û–ø–∏—Å–∞–Ω–∏–µ —É—Ç–æ—á–Ω—è–π—Ç–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É'}</div>
        <button class="btn-cart" onclick="addToCart('${t.name}', '${t.p1}')">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        <button class="btn-click" onclick="oneClick('${t.name}')">–í 1 –∫–ª–∏–∫</button>
      </div>
    `;
    div.onclick = (e) => { if(e.target.tagName !== 'BUTTON') div.classList.toggle('open'); };
    grid.appendChild(div);
  });
}

// –§–∏–ª—å—Ç—Ä—ã
document.getElementById('searchInput').oninput = () => {
  const val = document.getElementById('searchInput').value.toLowerCase();
  render(tools.filter(t => t.name.toLowerCase().includes(val)));
};
document.getElementById('catSelect').onchange = (e) => {
  const c = e.target.value;
  render(c === 'all' ? tools : tools.filter(t => t.cat === c));
};

function addToCart(name, price) {
  cart.push({name, price});
  document.getElementById('count').textContent = cart.length;
}

function showCart() {
  document.getElementById('cartOverlay').style.display = 'flex';
  const list = document.getElementById('cartItems');
  list.innerHTML = cart.length ? '' : '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞';
  let total = 0;
  cart.forEach((item, i) => {
    total += parseInt(item.price);
    list.innerHTML += `<div style="display:flex; justify-content:space-between; margin-bottom:10px;">
      <span>${item.name}</span> <b>${item.price}‚ÇΩ</b>
      <span onclick="cart.splice(${i},1); showCart();" style="color:red; cursor:pointer;">‚úï</span>
    </div>`;
  });
  document.getElementById('totalSum').textContent = `–ò—Ç–æ–≥–æ (1-–µ —Å—É—Ç–∫–∏): ${total} ‚ÇΩ`;
}

function hideCart() { document.getElementById('cartOverlay').style.display = 'none'; }

async function sendToTG() {
  const name = document.getElementById('userName').value;
  const phone = document.getElementById('userPhone').value;
  if(!name || phone.length < 10) return alert('–£–∫–∞–∂–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω');

  let text = `<b>üõí –ó–ê–ö–ê–ó –° –°–ê–ô–¢–ê</b>\n\nüë§ –ò–º—è: ${name}\nüìû –¢–µ–ª: ${phone}\n\n<b>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</b>\n`;
  cart.forEach((t, i) => text += `${i+1}. ${t.name} (${t.price}‚ÇΩ)\n`);

  const res = await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: CHAT_ID, text, parse_mode: 'HTML' })
  });
  
  if(res.ok) {
    alert('–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! –û–ª–µ–≥ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.');
    cart = []; document.getElementById('count').textContent = 0; hideCart();
  }
}

function oneClick(name) {
  const p = prompt('–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞ ' + name + ':');
  if(p) {
    const text = `<b>‚ö° –ó–ê–ö–ê–ó –í 1 –ö–õ–ò–ö</b>\n\nüõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: ${name}\nüìû –¢–µ–ª: ${p}`;
    fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ chat_id: CHAT_ID, text, parse_mode: 'HTML' })
    }).then(() => alert('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!'));
  }
}
</script>
</body>
</html>
