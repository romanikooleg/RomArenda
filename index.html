<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ê—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ‚Äî –†–æ–º–ê—Ä–µ–Ω–¥–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="–ê—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞. –ë—ã—Å—Ç—Ä–æ, –±–µ–∑ –∑–∞–ª–æ–≥–∞. –ó–∞–∫–∞–∑ –≤ 1 –∫–ª–∏–∫. –†–æ–º–ê—Ä–µ–Ω–¥–∞">

<style>
:root {
  --yellow:#FFC107;
  --black:#1F1F1F;
  --gray:#f4f4f4;
  --white:#fff;
  --blue:#0088cc;
}

body{margin:0;font-family:Segoe UI,Arial;background:var(--gray);color:var(--black);}

header{
background:var(--black);
color:white;
padding:15px;
}

.header-top{
display:flex;
align-items:center;
justify-content:space-between;
gap:15px;
flex-wrap:wrap;
}

.logo{
display:flex;
align-items:center;
gap:10px;
}

.logo img{height:70px;border-radius:8px;}

.hero{
margin-top:10px;
font-size:14px;
color:#ccc;
}

.phone{color:var(--yellow);font-weight:bold;font-size:18px;}

.controls{
position:sticky;
top:0;
z-index:100;
background:white;
padding:10px;
display:flex;
gap:10px;
flex-wrap:wrap;
justify-content:center;
box-shadow:0 2px 5px rgba(0,0,0,0.1);
}

input,select{
padding:10px;
border-radius:10px;
border:1px solid #ccc;
}

.cartBtn{
background:var(--yellow);
border:none;
border-radius:10px;
padding:10px 16px;
font-weight:bold;
cursor:pointer;
}

.container{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
gap:20px;
padding:20px;
}

.card{
background:white;
border-radius:16px;
box-shadow:0 5px 12px rgba(0,0,0,0.08);
overflow:hidden;
display:flex;
flex-direction:column;
transition:.3s;
}

.card:hover{transform:translateY(-5px);}

.card img{
width:100%;
height:200px;
object-fit:cover;
}

.card-body{
padding:12px;
display:flex;
flex-direction:column;
flex-grow:1;
}

.card h3{margin:0 0 6px;}

.price{
font-size:18px;
font-weight:bold;
margin-bottom:6px;
}

.badge{
display:inline-block;
background:#e8f5e9;
color:#2e7d32;
padding:4px 8px;
border-radius:8px;
font-size:12px;
margin-bottom:6px;
}

.desc{
font-size:13px;
color:#666;
flex-grow:1;
}

.actions{
margin-top:10px;
display:flex;
flex-direction:column;
gap:8px;
}

.oneClickBtn{
background:var(--blue);
color:white;
border:none;
padding:12px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
}

.addBtn{
background:#eee;
border:none;
padding:10px;
border-radius:10px;
cursor:pointer;
}

button:active{transform:scale(.97);}

/* CART */
#cartBox{
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
display:none;
justify-content:center;
align-items:center;
z-index:999;
}

#cart{
background:white;
padding:20px;
border-radius:20px;
width:90%;
max-width:400px;
}

.cartItem{
display:flex;
justify-content:space-between;
border-bottom:1px solid #eee;
padding:6px 0;
}

.trust{
display:flex;
gap:15px;
justify-content:center;
padding:10px;
background:white;
font-size:13px;
}

@media(max-width:600px){
.header-top{flex-direction:column;align-items:flex-start;}
}
</style>
</head>

<body>

<header>
<div class="header-top">
  <div class="logo">
    <img src="logo.png">
    <h1>–†–æ–º–ê—Ä–µ–Ω–¥–∞</h1>
  </div>
  <div class="phone">üìû +7 915 277 24 41</div>
</div>
<div class="hero">
–ê—Ä–µ–Ω–¥–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ‚Ä¢ –ë—ã—Å—Ç—Ä–æ ‚Ä¢ –ë–µ–∑ –∑–∞–ª–æ–≥–∞ ‚Ä¢ –ó–∞–∫–∞–∑ –≤ 1 –∫–ª–∏–∫
</div>
</header>

<div class="controls">
<input id="search" placeholder="üîç –ü–æ–∏—Å–∫...">
<select id="categoryFilter"><option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option></select>
<button class="cartBtn" onclick="openCart()">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</button>
</div>

<div class="trust">
<div>‚ö° –í—ã–¥–∞—á–∞ –∑–∞ 10 –º–∏–Ω—É—Ç</div>
<div>üõ† –ë–æ–ª–µ–µ 50 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤</div>
<div>üìç –†–∞–±–æ—Ç–∞–µ–º –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö</div>
</div>

<div class="container" id="products"></div>

<!-- CART -->
<div id="cartBox">
<div id="cart">
<h2>üõí –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
<div id="cartItems"></div>
<div id="totalPrice" style="margin:10px 0;font-weight:bold;"></div>
<input id="clientName" placeholder="–í–∞—à–µ –∏–º—è" style="width:100%;padding:10px;margin:5px 0;">
<input id="clientPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" style="width:100%;padding:10px;margin-bottom:10px;">
<button class="oneClickBtn" onclick="sendOrder()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
<button onclick="closeCart()" style="margin-top:10px;background:none;border:none;">–ù–∞–∑–∞–¥</button>
</div>
</div>

<script>
const TG_TOKEN="–¢–í–û–ô_–¢–û–ö–ï–ù";
const TG_CHAT_ID="–¢–í–û–ô_CHAT_ID";

const sheetURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTOtUQAhnBMNrCPWFj0u6cjQeb0qWscrovHdCWvuBQMaCCirL4ds3i6NtjqwMpcReNsrhrY_X8ICXOL/pub?gid=2109115062&single=true&output=csv";

const productsDiv=document.getElementById("products");
const search=document.getElementById("search");
const categoryFilter=document.getElementById("categoryFilter");
const cartCount=document.getElementById("cartCount");

let products=[];
let cart=JSON.parse(localStorage.getItem("cart"))||[];
cartCount.textContent=cart.length;

fetch(sheetURL)
.then(r=>r.text())
.then(csv=>{
const rows=csv.split("\n").slice(1).filter(r=>r.trim()!=="");
products=rows.map(r=>{
const c=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
return{
cat:c[0],
name:c[1],
desc:c[2]||"–û–ø–∏—Å–∞–Ω–∏–µ —É—Ç–æ—á–Ω—è–π—Ç–µ",
img:c[3]||"https://via.placeholder.com/300x200",
price:Number(c[4])||0
};
});
initFilters();
render(products);
});

function initFilters(){
[...new Set(products.map(p=>p.cat))].forEach(cat=>{
let o=document.createElement("option");
o.value=cat;
o.textContent=cat;
categoryFilter.appendChild(o);
});
}

search.addEventListener("input",()=>{
let v=search.value.toLowerCase();
render(products.filter(p=>p.name.toLowerCase().includes(v)));
});

categoryFilter.addEventListener("change",e=>{
let c=e.target.value;
render(c=="all"?products:products.filter(p=>p.cat==c));
});

function render(list){
productsDiv.innerHTML="";
list.forEach(p=>{
let card=document.createElement("div");
card.className="card";
card.innerHTML=`
<img src="${p.img}">
<div class="card-body">
<span class="badge">–í –Ω–∞–ª–∏—á–∏–∏</span>
<h3>${p.name}</h3>
<div class="price">${p.price} ‚ÇΩ / —Å—É—Ç–∫–∏</div>
<div class="desc">${p.desc}</div>
<div class="actions">
<button class="oneClickBtn" onclick="orderOne('${p.name}')">–ó–∞–∫–∞–∑–∞—Ç—å –≤ 1 –∫–ª–∏–∫</button>
<button class="addBtn" onclick="addCart('${p.name}',${p.price})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
</div>
</div>
`;
productsDiv.appendChild(card);
});
}

function addCart(name,price){
cart.push({name,price});
localStorage.setItem("cart",JSON.stringify(cart));
cartCount.textContent=cart.length;
}

function openCart(){
cartBox.style.display="flex";
renderCart();
}
function closeCart(){cartBox.style.display="none";}

function renderCart(){
let box=cartItems;
let total=0;
box.innerHTML="";
cart.forEach((i,idx)=>{
total+=i.price;
box.innerHTML+=`<div class="cartItem">${i.name} <b>${i.price}‚ÇΩ</b> <span onclick="removeItem(${idx})" style="color:red;cursor:pointer;">‚úï</span></div>`;
});
totalPrice.textContent=cart.length?`–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ/—Å—É—Ç–∫–∏`:"–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞";
}

function removeItem(i){
cart.splice(i,1);
localStorage.setItem("cart",JSON.stringify(cart));
cartCount.textContent=cart.length;
renderCart();
}

function orderOne(name){
let phone=prompt("–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω:");
if(phone){
sendTelegram(`‚ö°Ô∏è –ó–ê–ö–ê–ó\n–¢–æ–≤–∞—Ä: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`);
}
}

function sendOrder(){
let name=clientName.value;
let phone=clientPhone.value;
if(!name||!phone)return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");

let msg="üõí –ó–ê–ö–ê–ó:\n";
let total=0;
cart.forEach(i=>{msg+=`${i.name} ${i.price}‚ÇΩ\n`;total+=i.price;});
msg+=`–ò—Ç–æ–≥–æ: ${total}‚ÇΩ\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`;
sendTelegram(msg);

cart=[];
localStorage.clear();
closeCart();
cartCount.textContent=0;
}

function sendTelegram(text){
fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({chat_id:TG_CHAT_ID,text})
});
alert("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
}
</script>

</body>
</html>

